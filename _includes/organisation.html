<section class="single-pagebanner" style="background-image: url({% include baseurl %}/assets/images/sin-act-banner.png);">
</section>

<section class="organisational-chart">
    <div class="container">
    <div class="row" style="position: relative"></div>
        
        <h2>Organisational Chart</h2>
        <script src="https://balkan.app/js/OrgChart.js"></script>

            <div id="tree"/>
    
        <script>
        OrgChart.templates.ula = Object.assign({}, OrgChart.templates.ana);
        OrgChart.templates.ula.padding = [5, 5, 5, 5];
        OrgChart.templates.ula.field_0 = 
        '<text data-width="145" data-text-overflow="multiline" style="font-size: 18px;" fill="#008c88" x="100" y="40">{val}</text>';
        OrgChart.templates.ula.field_1 = 
        '<text data-width="145" data-text-overflow="multiline" style="font-size: 14.5px;" fill="#4D4D4D" x="100" y="83">{val}</text>';
        OrgChart.templates.ula.node = 
        '<rect x="0" y="0" height="{h}" width="{w}" fill="#ffffff" stroke-width="1" stroke="#aeaeae"></rect>'
        + '<line x1="0" y1="0" x2="250" y2="0" stroke-width="2" stroke="#008c88"></line>';
        OrgChart.templates.ula.img_0 = 
        '<clipPath id="{randId}"><circle cx="50" cy="60" r="40"></circle></clipPath>'
        + '<image preserveAspectRatio="xMidYMid slice" clip-path="url(#{randId})" xlink:href="{val}" x="10" y="20" width="80" height="80"></image>';
        OrgChart.templates.ula.nodeMenuButton = 
        '<g style="cursor:pointer;" transform="matrix(1,0,0,1,225,105)" data-ctrl-n-menu-id="{id}">'
        + '<rect x="-4" y="-10" fill="#000000" fill-opacity="0" width="22" height="22"></rect>'
        + '<circle cx="0" cy="0" r="2" fill="#AEAEAE"></circle>'
        + '<circle cx="7" cy="0" r="2" fill="#AEAEAE"></circle>'
        + '<circle cx="14" cy="0" r="2" fill="#AEAEAE"></circle>'
        + '</g>';
        OrgChart.SEARCH_PLACEHOLDER = "Search for person by name..."
        
    window.onload = function () {

        var timeout = null;
        var chart = new OrgChart(document.getElementById("tree"), {
            showXScroll: OrgChart.scroll.visible,
            mouseScrool: OrgChart.action.xScroll,
            nodeMouseClick: OrgChart.action.none,
            scaleInitial: OrgChart.match.boundary,
            template: "ula",            
            enableSearch: false,
            collapse: {
                level: 2
            },
            nodeBinding: {
                field_0: 'name',
                field_1: 'title',
                img_0: 'img',
            }, 
        });

        chart.on('field_0', function(sender, args){
  	        var name = args.data["name"];
					var link = args.data["link"];
		args.value = '<a target="_blank" href="' + link + '">' + name +  '</a>';
        });
        
        chart.load([
                { id: 1, name: "Gudmund Høst", title: "Director", img: "{% include baseurl %}/assets/images/people/gudmund-host.jpg", link: "{% include baseurl %}/people/gudmund-host" },
                { id: 2, pid: 1, name: "Abdulrahman Azab", title: "Senior advisor, Pro- ject owner", img: "{% include baseurl %}/assets/images/people/Abdulrahman_Azab2.jpg", link: "{% include baseurl %}/people/abdulrahman-azab" },
                { id: 3, pid: 1, name: "Mari Nyholm", title: "Administrative coordinator", img: "https://cdn.balkan.app/shared/empty-img-white.svg", link: "{% include baseurl %}/people/mari-nyholm" },
                { id: 4, pid: 1, name: "Rob Pennington", title: "Special advisor, Project owner", img: "{% include baseurl %}/assets/images/people/Rob_Pennington.jpg", link: "{% include baseurl %}/people/rob-pennington" },
                { id: 5, pid: 1, name: "Tomasz Malkiewicz", title: "Executive manager, Project owner", img: "{% include baseurl %}/assets/images/people/tomasz-malkiewicz.jpg", link: "{% include baseurl %}/people/tomasz-malkiewicz" },
                { id: 6, pid: 1, name: "Vilma Häkkinen", title: "Communications advisor", img: "{% include baseurl %}/assets/images/people/vilma-hakkinen.jpeg", link: "{% include baseurl %}/people/vilma-hakkinen" },
                { id: 7, pid: 4, name: "Alberto Lanzanova", title: "Project manager, NordIQuEst", img: "{% include baseurl %}/assets/images/people/alberto-lanzanova.jpg" },
                { id: 8, pid: 5, name: "Anders Sjöström", title: "Project manager, Puhuri", img: "https://cdn.balkan.app/shared/empty-img-white.svg" },
                { id: 9, pid: 2, name: "Anne Fouilloux", title: "Project manager, NICEST2", img: "https://cdn.balkan.app/shared/empty-img-white.svg" },
                { id: 10, pid: 4, name: "Anna Hagwall", title: "Project manager, Heilsa Tryggvedottir", img: "{% include baseurl %}/assets/images/people/anna-hagwall.JPG" },
                { id: 11, pid: 5, name: "Antti Valkonen", title: "Project manager, Nordic Microdata Database", img: "https://cdn.balkan.app/shared/empty-img-white.svg" },
                { id: 12, pid: 2, name: "Lene Krøl Andersen", title: "Affiliate coordinator, EOSC-Nordic", img: "{% include baseurl %}/assets/images/people/lene-krol-andersen.jpg" },
                { id: 13, pid: 2, name: "Mattias Wadenstein", title: "Activity manager, Nordic Tier-1", img: "{% include baseurl %}/assets/images/people/mattias-wadenstein.jpg" },
                { id: 14, pid: 5, name: "Radovan Bast", title: "Project manager, CodeRefinery", img: "{% include baseurl %}/assets/images/people/radovan-bast.jpg" },
            ])
            window.addEventListener('resize', function () {
            if (timeout) {
                clearTimeout(timeout)
            }
                timeout = setTimeout(function () {
                chart.fit();
                }, 500);
            })

    };
        </script>
       
    </div> 
    <div class="container">
        <p>A complete list of our personnel can be seen on <a href="{% include baseurl %}/people/">the NeIC team and contact page</a>.
        </p>
        </div>
    </div>
</section>